"use strict";jQuery(document).ready(function(a){function b(){var b=jQuery("#metronet_post_id").val();jQuery("#metronet-profile-image").html("<img class=\"mpp-loading\" alt=\"Loading\" width=\"150\" height=\"150\" src=\""+metronet_profile_image.loading_gif+"\" />"),a.post(metronet_profile_image.ajax_url,{action:"metronet_get_thumbnail",post_id:b},function(a){jQuery("#metronet-profile-image").html(d(a.thumb_html)),jQuery(".user-profile-picture img ").replaceWith(a.avatar),a.user_id===a.logged_in_user_id&&(jQuery("#wp-admin-bar-my-account img.avatar-26").replaceWith(a.avatar_admin_small),jQuery("#wp-admin-bar-my-account img.avatar-64").replaceWith(a.avatar_admin_medium))},"json")}function c(){jQuery("#metronet-profile-image").html("<img class=\"mpp-loading\" alt=\"Loading\" width=\"150\" height=\"150\" src=\""+metronet_profile_image.loading_gif+"\" />"),a.post(metronet_profile_image.ajax_url,{action:"metronet_remove_thumbnail",post_id:metronet_profile_image.user_post_id,user_id:jQuery("#metronet_profile_id").val(),_wpnonce:metronet_profile_image.nonce},function(a){jQuery("#metronet-profile-image").html(d(a.thumb_html)),jQuery(".user-profile-picture img ").replaceWith(a.avatar),a.user_id===a.logged_in_user_id&&(jQuery("#wp-admin-bar-my-account img.avatar-26").replaceWith(a.avatar_admin_small),jQuery("#wp-admin-bar-my-account img.avatar-64").replaceWith(a.avatar_admin_medium))},"json")}function d(a){var b=document.createElement("div");return b.innerHTML=a,b.firstElementChild.style.display="block",b.firstElementChild.firstElementChild.style.display="block",b.innerHTML}a("#mpp").on("click",".mpp_add_media",function(){var e=wp.media({state:"featured-image",states:[new wp.media.controller.FeaturedImage],title:metronet_profile_image.set_profile_text,button:{text:metronet_profile_image.remove_profile_text},multiple:!1});return e.on("toolbar:create",function(b){var c={};c.items={},c.items.select={text:metronet_profile_image.set_profile_text,style:"primary",click:wp.media.view.Toolbar.Select.prototype.clickSelect,requires:{selection:!0},event:"select",reset:!1,close:!0,state:!1,syncSelection:!0},a("#metronet-profile-image a").hasClass("default-image")||(c.items.remove={text:metronet_profile_image.remove_profile_text,style:"secondary",requires:{selection:!1},click:wp.media.view.Toolbar.Select.prototype.clickSelect,event:"remove",reset:!0,close:!0,state:!1,syncSelection:!0}),this.createSelectToolbar(b,c)},e),e.mt_featured_set=function(b){jQuery("#metronet-profile-image").html("<img class=\"mpp-loading\" alt=\"Loading\" width=\"150\" height=\"150\" src=\""+metronet_profile_image.loading_gif+"\" />"),a.post(metronet_profile_image.ajax_url,{action:"metronet_add_thumbnail",post_id:metronet_profile_image.user_post_id,user_id:jQuery("#metronet_profile_id").val(),thumbnail_id:b,_wpnonce:metronet_profile_image.nonce},function(a){jQuery("#metronet-profile-image").html(d(a.thumb_html)),jQuery(".user-profile-picture img ").replaceWith(a.avatar),a.user_id===a.logged_in_user_id&&(jQuery("#wp-admin-bar-my-account img.avatar-26").replaceWith(a.avatar_admin_small),jQuery("#wp-admin-bar-my-account img.avatar-64").replaceWith(a.avatar_admin_medium))},"json")},e.on("select",function(){var a=e.state().get("selection").single();wp.media.featuredImage.set(a?a.id:-1),a.id&&e.mt_featured_set(a.id)}),e.on("remove",function(){wp.media.featuredImage.set(-1),c()}),e.on("escape",function(){b()}),e.open(),!1}),a("#mpp").on("click","a#metronet-remove",function(a){a.preventDefault(),wp.media.featuredImage.set(-1),c()})});
//# sourceMappingURL=mpp.min.js.map
